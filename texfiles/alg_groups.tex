\documentclass{memoir}

\input{header}
\title{Algebraic groups}

\author{Emile T. Okada,\\ S\o ren Gammelgaard}

\begin{document}
\maketitle
\tableofcontents
\chapter{Affine group schemes}
\section{Affine schemes}
\begin{definition}
    Let $k$ be a commutative ring. An \textit{affine scheme over $k$} is a representable functor $F:\Alg_k\to \Set$.
\end{definition}
Let us try to motivate this definition a bit. 
Let $k$ be a commutative ring and $\{f_\alpha\}\subseteq k[x_1,\dots,x_n]$.
For any $k$-algebra $R$ we can consider the set of points in $R^n$ satisfying $f_\alpha = 0$ for all $\alpha$.
Let us call this set $I(R)$.
It is clear that if we have a $k$-algebra homomorphism $f:R\to S$ we obtain a map $I(f):I(R) \to I(S)$, and that this turns $I$ into a functor $I:\Alg_k\to \Set$.
\begin{theorem}
    Let $J$ be the ideal of $k[x_1,\dots,x_n]$ generated by the $f_\alpha$ and $A = k[x_1,\dots,x_n]/J$.
    Then $I$ is a representable functor with representative $A$.
\end{theorem}
\begin{proof}
    Let $a = (a_1,\dots,a_n)\in I(R)$ and let $f_a:k[x_1,\dots,x_n]\to R$ be the $k$-algebra homomorphism given by $x_i\mapsto a_i$.
    By definition of the point $a$, the ideal $J$ must map to 0 under $f_a$.
    Thus $f_a$ factors through $A$ and we obtain a map $\bar f_a: A\to R$.

    Conversely, given a map $f:A\to R$, let $a = (f(\bar x_1),\dots,f(\bar x_n))\in R^n$ where $\bar x_i$ is the image of $x_i$ in $A$.
    Since $f$ is a homomorphism it is clear that $a$ lies in $I(R)$.

    These two maps give a bijection between the sets $I(R)$ and $\Hom_k(A,R)$.
    It is straightforward to check this is a natural bijection and so $I$ is naturally isomorphic to the functor $\Hom(A,-)$.
\end{proof}
This theorem says that the affine schemes are exactly what we expect them to be.
\subsection{The Yoneda lemma}
Recall from category theory the following result on representable functors.
\begin{theorem}
    (Yoneda's lemma).
    Let $F:\mathcal C\to \Set$ be a functor, $\mathcal C$ be locally small and $c\in \mathcal C$. Then there is a natrual bijection
    \begin{align}
        \Hom(\mathcal C(c,-),F) &\leftrightarrow Fc \\
        \eta \quad &\rightarrow \quad \eta_c(\id_c) \nonumber \\
        \eta_x: f\mapsto F(f)(y) \quad &\leftarrow \quad y. \nonumber 
    \end{align}
\end{theorem}
\begin{corollary}
    (Yoneda embedding).
    The functor 
    \begin{equation}
        \mathcal C(\bullet,-):\mathcal C^{op}\to \Fun(\mathcal C, \Set)
    \end{equation}
    is full and faithful.
\end{corollary}
\begin{proof}
    Let $c,d\in \mathcal C$.
    From the Yoneda lemma we have a bijection
    \begin{equation}
        \Hom(\mathcal C(d,-),\mathcal C(c,-)) \leftrightarrow \mathcal C(c,d).
    \end{equation}
    Let $f\in \mathcal C(c,d)$. 
    Under the bijection this gets sent to the natural transformation $\eta_x: g\mapsto \mathcal C(c,-)(g)(f) = g\circ f$.
    Thus the backwards map in the Yoneda bijection is just $\mathcal C(\bullet, -)$ and so the result follows.
\end{proof}
\begin{remark}
    It follows that $\mathcal C^{op}$ is equivalent to the category of representable functors from $\mathcal C$.
    In fact there exists a functor $P:\Fun^{rep}(\mathcal C,\Set) \to \mathcal C^{op}$ such that $P\circ \mathcal C(\bullet,-) = \id_{\mathcal C^{op}}$, $\mathcal C(\bullet,-)\circ P \cong \id_{\Fun^{rep}(\mathcal C,\Set)}$ and $\mathcal C(\bullet,-)\circ P|_{\im(\mathcal C(\bullet,-)} = \id_{\im(\mathcal C(\bullet,-)}$.
\end{remark}
\begin{corollary}
    Let $c,d\in \mathcal C$. 
    Then $c\cong d$ if and only if $\mathcal C(c,-) \cong \mathcal C(d,-)$.
\end{corollary}
\begin{proof}
    $(\Rightarrow)$ This follows by functoriality.

    $(\Leftarrow)$ Let $\alpha: \mathcal C(c,-) \Rightarrow \mathcal C(d,-)$ be an isomorphism and $\beta$ its inverse.
    Let $a:d\to c$ and $b:c\to d$ be the corresponding maps.
    By naturality of the Yoneda bijection
    \begin{equation}
        \begin{tikzcd}
            \Hom(\mathcal C(c,-),\mathcal C(d,-)) \arrow[r] \arrow[d,"\beta\circ"] & \mathcal C(d,c) \arrow[d,"\beta_c"] \\
            \Hom(\mathcal C(c,-),\mathcal C(c,-)) \arrow[r] & \mathcal C(c,c) 
        \end{tikzcd}
    \end{equation}
    commutes.
    So $\beta_c(\alpha_c(\id_c)) = \id_c$.
    But $\beta_c(\alpha_c(\id_c)) = a\circ b$ and so $a\circ b = \id_c$.
    Similarly $b\circ a = \id_b$ and so the result follows.

    Alternatively note use the remark. 
\end{proof}
This last corollary implies that two $k$-algebras are isomorphic if and only if the corresponding affine schemes are.
\section{Affine group schemes}
\begin{definition}
    An \textit{affine group scheme over $k$} is a functor $F:\Alg_k\to \Grp$ such that $F$ composed with the forgetful functor $\Grp \to \Set$ is representable.
\end{definition}
\begin{example}
    Let $k = \Z$ (so $\Alg_k = \Ring$).
    Then $\SL_n:\Ring\to \Grp$, $R\mapsto \SL_n(R)$ is an affine group scheme over $\Z$.
\end{example}
\begin{proposition}
    Let $E,F,G$ be affine group schemes over $k$ represented by $A,B,C$ respectively.
    If we have morphisms $E\to G$ and $F\to G$ then the pullback exists and is represented by $A\otimes_CB$.
\end{proposition}
\begin{proof}
    Existence follows from the fact that we can compute the pullback pointwise and $\Grp$ has pullbacks.
    Explicitly 
    \begin{equation}
        (E\times_G F)(R) = \{(e,f) : \text{ $e$ and $f$ have same image in $G(R)$}\}.
    \end{equation}
    For the second part of the proposition note that the pullback in $\Alg_k^{op}$ is of the required form and that we have an equivalence of categories between $\Alg_k^{op}$ and affine schemes over $k$.
\end{proof}
\begin{definition}
    Let $F$ be an affine group scheme over $k$ and let $\phi:k\to k'$ be a ring homomorphism.
    Any $k'$-algebra can be turned into a $k$ by composing by $\phi$ and so we can turn $F$ into a functor on $k'$-algebras.
    Call this new functor $F_{k'}$.
\end{definition}
\begin{proposition}
    If $F$ is represented by $A$ then $F_{k'}$ then is represented by $A\otimes_kk'$.
\end{proposition}
\begin{proof}
    There is a natural bijection 
    \begin{equation}
        \Hom_{k'}(A\otimes_kk',S) \leftrightarrow \Hom_k(A,S).
    \end{equation}
\end{proof}
\subsection{Hopf algebras}
Another way to define an affine group scheme is that it is a representable functor $F:\Alg_k \to \Set$ together with natural transformations $\mu:F\times F\to F$, $i:F\to F$ and $u:e\to G$ where $e$ is the functor $\Hom_k(k,-)$ such that
\begin{equation}
    \begin{tikzcd}
        F\times F\times F \arrow[r,"\id\times\mu"] \arrow[d,"\mu\times\id"] & F\times F \arrow[d,"\mu"] \\
        F\times F \arrow[r,"\mu"] & F
    \end{tikzcd}
\end{equation}
\begin{equation}
    \begin{tikzcd}
        e\times F \arrow[r,"u\times\id"] \arrow[dr,"\cong"] & F\times F \arrow[d,"\mu"] & F\times e \arrow[r,"\id\times u"] \arrow[dr,"\cong"] & F\times F \arrow[d,"\mu"] \\
                                                            & F & & F
    \end{tikzcd}
\end{equation}
\begin{equation}
    \begin{tikzcd}
        F \arrow[r,shift right,swap,"i\times\id"] \arrow[r,shift left,"\id\times i"] \arrow[d] & F\times F \arrow[d,"\mu"] \\
        e \arrow[r,"u"] & F
    \end{tikzcd}
\end{equation}
all commute.
If $F$ is represented by $A$ then translating back to $\Alg_k$ we obtain maps $\Delta:A\to A\otimes_k A$, $S:A\to A$ and $\epsilon:A\to k$.
Satisfying the same commutative diagrams, but with arrows reversed and $\mu$ replaced with $\Delta$ etc.
The algebra $A$ together with these maps is what we call a Hopf algebra.
\begin{definition}
    Let $\psi:H\to G$ be a morphism of affine groups schemes. 
    We say $\psi$ is a \textit{closed embedding} if the corresponding map on algebras is surjective.
    $H$ is then isomorphic to a closed subgroup of $G$ represented by the corresponding quotient of the algebra of $A$.
\end{definition}
\begin{theorem}
    Affine group schemes over $k$ correspond to Hopf algebras over $k$.
\end{theorem}
\begin{definition}
    Let $A$ be a $k$-algebra. 
    We call an ideal $I$ of $A$ a \textit{Hopf ideal} if $A/I$ inherits the structure of a Hopf algebra.
\end{definition}
\begin{proposition}
    Let $A$ be a $k$-algebra and $I\normal A$. Then $I$ is a hopf ideal if and only if $\Delta(I)\subseteq I\otimes A + A\otimes I$, $S(I)\subseteq I$ and $\epsilon(I) = 0$.
\end{proposition}
\begin{proof}
    Todo.
\end{proof}
\begin{definition}
    Let $\Phi:G\to H$ be a morphism of affine groups schemes. 
    Then $\ker\Phi (R) = \ker(G(R)\to H(R))$ or alternatively $\ker\Phi = G\times_H\{e\}$.
    It follows that if $G,H$ are represented by $A,B$ respectively then $\ker\Phi$ is represented by $A\otimes_B k\cong A/AI_B$.
\end{definition}
\subsection{Characters}
\begin{definition}
    A homomorphism $G\to G_m$ is called a character.
\end{definition}
\begin{theorem}\label{thm:characters_are_gp-like_elems}
    The characters of an affine group scheme $G$ represented by $A$ correspond to the group-like elements of $A$.
\end{theorem}
\section{Diagonalisable group schemes}\label{sec:diag_gp_sch}

Let $ M $ be an abelian group, $ k $ a ring, and $ k[M] $ the group algebra. We construct a Hopf algebra structure on $ k[M] $ by making the group elements group-like \ie we set \[ \Delta(m)=m\otimes m,\quad \epsilon(m)=1,\quad S(m)=m^{-1}, \] and we extend by linearity to all $ k[M] $. This is a Hopf algebra (easily checked on elements)
\begin{definition}\label{def:diag_gp_sch}
	A group scheme constructed in this way is called a \emph{diagonalisable group scheme}.
\end{definition}
The name is not immediately a good one, but we will later see that most affine group schemes can be embedded into $ \mathbf{GL}_n $ for some $ n $ \todo{ref!}, and that the diagonalisable group schemes will be precisely those corresponding to groups of diagonalisable matrices. 

We can describe these schemes completely:
\begin{theorem}\label{thm:struct_of_diag_gps}
	Let $ G $ be a diagonalisable group scheme, represented by $ A $, and suppose that $ A $ is a finitely generated $ k $-algebra.
	Then
	\[ G=\left(\prod_{i=1}^{n}\Gm\right)\times\prod_{j=1}^{n'}\pmb{\mu}_{m_j} \] for some integers $ n,n', m_j$. 
\end{theorem}
\begin{proof}
	Take a finite set of generators of $ A $. These are finite linear combinations of elements of $ M $, so we have a finite number of elements of $ M $ generating $ A $, Then these elements must also generate $ M $. So $ M $ is a finitely generated abelian group. But such groups are direct sums of copies of $ \Z $ and $ \Z/n\Z $, so we need only check two cases.
	
	Case 1: $ M=\Z $. Then $ k[\Z] $ has basis $ \{e_n|n\in \Z\} $, with multiplication $ e_i e_j = e_{i+j} $. So $ k[\Z]\isoto k[X, X^{-1}] $, the affine coordinate ring of $ \Gm $.

	Case 2: $ M=\Z/n\Z $. The basis is now $ \{1=e_0, e_1,\dots, e_{n-1}=e^{n-1}\} $. So $ e_1^n=1 $, and the Hopf algebra is $ k[X]/(X^n-1) $, which represents $ \pmb\mu_n $.
\end{proof}
We will now really exploit the Hopf algebra structure. First, we have
\begin{lemma}\label{lem:gplikes_lin_indep}
	The group-like elements in a Hopf algebra over a field $ k $ are linearly independent.
\end{lemma}
\begin{proof}
	Take group-like elements $ b, \{b_i\} $ such that \[ b=\sum\lambda_ib_i\qquad\textrm{(a finite sum),} \]
	and assume the $ b_i $ to be independent. Then
	\[ 1=\epsilon(b)=\sum\lambda_i\epsilon(b_i)=\sum\lambda_i. \]
	But \begin{align*} \Delta(b)&=b\otimes b=\sum \lambda_i\lambda_jb_i\otimes b_j\\
	&=\sum\lambda_i\Delta(b_i)=\sum\lambda_ib_i\otimes b_i\end{align*} so all $ \lambda_i\lambda_j=0 $ for $ j\ne i $, $ \lambda_i^2=\lambda_i $, so all $ \lambda_i $ are either 0 or 1. Since their sum is 1, exactly one $ \lambda_i =1$, and so $ b=b_i $.
\end{proof}
Furthermore:
\begin{theorem}\label{thm:diagon_implies_cring_is_span_of_gplikes}
	An affine group scheme over a field is diagonalisable iff its representing algebra (coordinate ring!) is spanned by group-like elements. There is a natural coequivalence of categories\[ \{\textrm{Diagonalisable group schemes}/k\}\isoto \cat{AbGrp}. \]
\end{theorem}
\begin{proof}
	By the lemma, if $ A $ is spanned by group-like elements, they are a basis of $ A $. The group formed by them is the character group $ X_G $. So $ k[X_G]\isoto A $, at least as sets. Checking on basis elements shows that this is an isomorphism of Hopf algebras.
	If $ M $ is any abelian group, its elements are the only group-like elements of $ k[M] $. Thus $ M $ is the character group of $ \Spec k[M] $ (the group scheme rep. by $ k[M] $).
	Also, if $ G\to H $ is a homomorphism of affine algebraic groups, we have an induced map $ X_H\to X_G $. This determines the Hopf algebra structure, since $ X_H $ spans $ k[X_H] $. In the opposite direction, a map $ X_H\to X_G $ clearly induces a map $ k[X_H]\to k[X_G] $.
\end{proof}
We will develop this correspondence further in \cref{sec:Cartier_duality}.
\section{Finite constant groups}\label{sec:fin_const_gps}
Let $ \Gamma $ be a finite group, and define a functor \[ \ol\Gamma\colon \textsf{k-alg}\to \Grp \] sending every ring to $ \Gamma $, every map to the identity map. This functor is unrepresentable (not sure why), but we'll do something almost as good.

Let $ A\coloneqq Mor(\Gamma\to k) $. Let $ e_\sigma $ be the indicator function for $ \sigma\in \Gamma $, so $ \{e_\sigma\} $ is a basis for $ A $. We define a ring structure on $ A $ by $ e_\sigma^2=e_\sigma, e_\sigma e_\tau =0 $ for $ \sigma\ne\tau $, $ \sum e_\sigma =1 $.

Let $ R $ be a $ k $-algebra where the only idempotents are 0 and 1. Then a homomorphism $ \phi\colon A\to R $ is completely determined by which $ \sigma $ is sent to $ 1 $, so $ \Hom(A,R)\isoto \Gamma $ as sets. If we define a comultiplication on $ A $ by $ \Delta(e_\rho)=\sum_{\rho=\sigma\tau}e_\sigma\otimes e_\tau$, this induces the same group structure on $ \Hom(A,R) $ as that of $ \Gamma $.
If we define $ S(e_\sigma)=e_{\sigma^{-1}} $, $ \epsilon(e_\sigma)=1 $ if $ \sigma $ is the unit of $ \Gamma $, otherwise $ 0 $, $ A $ becomes a Hopf algebra. We say that it represents the \emph{constant group scheme} $ \Gamma $.
\subsection{Scheme-theoretic aside}
As a scheme, the construction is simpler: Just take $ \Spec(\prod_{g\in \Gamma})=\coprod_{g\in\Gamma}\Spec k $, and define the group structure by $G\times G\ni (\Spec k)_{g,h} \mapsto (\Spec k)_{gh} \in G$. Chasing through the definitions and various categorical equivalences shows that this really is the same construction.
\section{Cartier Duality}\label{sec:Cartier_duality}
Let $ k $ be a ring, $ N $ a finite rank free $ k $-module. Recall that then: $ N\dual $ is also free; if $ M $ is also finite rank free, $(M\otimes N)\dual\isoto M\dual\otimes N\dual  $; $ \Hom_k(M\dual, N\dual)\isoto \Hom_k(M,N)\dual $; and $ \Hom, \otimes $ commute with finite direct sums.
Hence the same identities hold for finitely generated projective modules, as they are summands of free modules.

\begin{definition}\label{def:finite_group_scheme}
	Call a group scheme \emph{finite} if it is represented a $ k $-algebra $ A $ which is a finitely generated projective\footnote{The projectivity hypothesis is probably not part of the definition found elsewhere. But we will need it in these notes.} module. 
\end{definition} Note that being finitely generated as a module is a much stronger condition than being finitely generated as a $ k $-algebra.
\begin{remark}
	The scheme-theoretic statement would be: $ G $ is a group object in the category of schemes over $ k $ with a finite structure morphism.
\end{remark}
So take such a group scheme $ G $. Then we have five Hopf structure maps:
\begin{align*}
	\Delta &\colon A\to A\otimes A &\textrm{comultiplication}\\
	\epsilon&\colon A\to k &\textrm{counit}\\
	S&\colon A\to A& \textrm{coinverse}\\
	m&\colon A\times A\to A &\textrm{multiplication}\\
	u&\colon k\to A& \textrm{unit}.\\
\end{align*}
If we dualise these, we end up with something very similar:
\begin{align*}
	m\dual  &\colon A\dual\to A\dual\otimes A\dual \\
	u\dual&\colon A\dual\to k \\
	S\dual&\colon A\dual\to A\dual\\
	\Delta\dual&\colon A\dual\times A\dual\to A\dual \\
	\epsilon\dual&\colon k\to A\dual\\
\end{align*}
and we are immediately led to
\begin{theorem}[Cartier duality 1]\label{thm:Cartier_duality}
	Let $ G $ be a finite abelian group scheme represented by $ A $. Then $ A\dual $ represents another finite abelian group scheme $ G\dual $, and $ (G\dual)\dual \isoto G $.
\end{theorem}
\begin{proof}[Sketch of proof]
	This is reasonably straightforward - just check that all the axioms are satisfied, dualise diagrams if needed.
	The only tricky bit is to show that $ S\dual $ is a homomorphism: We must show that \[ \Delta\dual(S\dual\otimes S\dual) =S\dual\Delta\dual, \] which is equivalent to $ \Delta S = (S\otimes S)\Delta $.
	As group functors, this means that the following diagrams commute:

	\begin{tikzcd}
		A \arrow[r, "\Delta"] \arrow[d, "S"] & A\otimes A \arrow[d, "S\otimes S"]
		\\
		A \arrow[r, "\Delta"] & A\otimes A
	\end{tikzcd} \quad or equivalently \begin{tikzcd}
	G & G\times G \arrow[l, "mult."] \\
	G \arrow[u, "inv"'] & G\times G \arrow[l, "mult."] \arrow[u, "inv\times inv"']
\end{tikzcd} which commutes iff $ a^{-1}b^{-1}=(ab)^{-1} $ -- that is, iff $ G $ is abelian.\end{proof}

How do we compute $ G\dual(k) $?
This is the set of maps $\phi\colon A\dual\to k $, which by duality are all of the form $ \phi_b\colon f\mapsto f(b) $. We have 
\[ \phi_b(fg)=\phi_b\Delta\dual(f\otimes g)=\Delta(f\otimes g)(b)=(f\otimes g)(\Delta b) ,\] and
\[ \phi_b(f)\phi_b(g)=f(b)g(b)=(f\otimes g)(b\otimes b) \]
so $ \phi_b $ preserves products iff $ \Delta b=b\otimes b $. A similar argument for $ \epsilon $ leads us to conclude that
\[ G\dual(k)= \{\textrm{group-like elements of } A\} \]
which we know from before (\cref{thm:characters_are_gp-like_elems}) is the character group of $ G $.

We can evaluate $ G\dual(R) $ by base change. $ G_R $ is the functor represented by $ A\otimes R $, and so $ G_R\dual  $ is represented by $ (A\otimes R)\dual = A\dual\otimes R $, which also represents $ (G\dual)_R $.
Hence \[ G\dual(R)=(G\dual)_R(R)=(G_R)\dual(R)= \{\textrm{group-like elements of } A\otimes R\}.\]
We have
\begin{corollary}\label{cor:cartier_duality_2}
	Forming the dual group scheme commutes with base change, and $ G\dual(R)=\Hom(G_R, \Gm_R) $.
\end{corollary}

Note also that in this case, the group functor $ \Hom(G,H) $ is representable. This is not in general true.

\chapter{Representations of algebraic groups}
\section{Actions \& linear representations}
Let $ G $ be a group functor, $ X $ a set functor. An \emph{action} of $ G $ on $ X $ (written $ G\actson X $) is the only sensible thing: a natural transformation $ G\times X\to X $ such that all the maps $ G(R)\times X(R)\to X(R) $ are group actions.

For now, we will take $ X $ of the form $ R\mapsto V\times R $, for some $ k $-module $ R $. If the induced action of $ G(R) $ is linear, we say that we have a \emph{linear representation of $ G $ on $ V $}.
\subsubsection{Examples}
\todo{write some!} no examples yet.

Our first theorem characterizes these:
\begin{theorem}\label{thm:characterize_linear_reps}
Let $ G $ be an affine group scheme, represented by $ A $. Then linear representations of $ G $ on $ V $ correspond to $ k $-linear maps $ V\to V\otimes A $ such that
\begin{tikzcd}
	V \arrow[r, "\rho"] \arrow[d, "\rho"] & V\otimes A \arrow[d, "\id\otimes\Delta"] \\
	V\otimes A \arrow[r, "\rho\otimes \id"] & V\otimes A\otimes A
\end{tikzcd} and \begin{tikzcd}
& V \arrow[rd, two heads, hook] \arrow[ld, "\rho"] &  \\
V\otimes A \arrow[rr, "\id\otimes\epsilon"] &  & V\otimes k
\end{tikzcd} commute.
\end{theorem}
\begin{proof}
	Omitted (it's super boring). You write out all the required diagrams and find out that you need exactly these to commute.
\end{proof}

Patterned on this, we make the following
\begin{definition}\label{def:comodule}
A $ k $-module $V$, with a $ k $-linear map $ \rho\colon V\to V\otimes A $ satisfying \[(\id\otimes \epsilon)\rho =\id, \quad (\id\otimes \Delta)\rho = (\rho\otimes \id)\rho\] is an $ A $-\emph{comodule}.
\end{definition}

\begin{example}
	If $ V=A, \rho=\Delta $, this gives the \emph{regular representation} of $ G $.
\end{example}

Standard constructions on modules also work for comodules - tensor products and direct sums make sense, and we can speak of subcomodules and quotient comodules.\footnote{The category of comodules is not necessarily abelian, since kernels do not always exist. They will apparently exist if the Hopf algebra is flat. (see \href{https://mathoverflow.net/questions/94115/when-a-comodule-category-is-equivalent-to-a-module-category}{\underline{this MathOverflow discussion}.})}

\section{Finiteness}\label{sec:finiteness}
\begin{proposition}\label{prop:findim_cosubmodules}
	Let $ k $ be a field, $ A/k $ a Hopf algebra. Every $ A $-comodule $ V $ is a direct limit of finite-dimensional subcomodules.
\end{proposition}
\begin{proof}
	We show that every $ v\in V $ is contained in some finite-dimensional subcomodule. Let $ \{a_i\} $ be a basis for $ A $, so that $ \rho(v)=\sum v_i\otimes a_i $, where only finitely many $ v_i\ne0 $.
	Write $ \Delta(a_i)=\sum r_{ijk}a_j\otimes a_k $.
	Then
	\[ \sum \rho(v_i)\otimes a_i=(\rho\otimes\id)\rho(v)=(\id\otimes\Delta)(\rho(v))=\sum v_i\otimes r_{ijk}a_j\otimes a_k .\]
	We compare the coefficients of $ a_k $ to see that $ \rho(v_k)=\sum v_i\otimes r_{ijk}a_j $. Hence $ \Spn\langle v, \{v_i\}\rangle $ is a finite-dimensional subcomodule.
\end{proof}
We can extend this further to show:
\begin{theorem}\label{thm:hopfalgs_are_direct_limits}
	Any Hopf algebra $ A $ over a field $ k $ equals $ \lim_{\to}A_\alpha $, where the $ A_\alpha $ are finitely generated $ k $-Hopf-subalgebras.
\end{theorem}
\begin{proof}[Proof sketch]
	We show that every finite subset of $ A $ is in some $ A_\alpha $. From \cref{prop:findim_cosubmodules}, we know that the finite subset is in a finite-dimensional $ V $, with $ \Delta(V)\subseteq V\otimes A $. Let then $ \{v_j\} $ be a basis for $ V $. Then $ \Delta(v_j)=\sum v_i\otimes a_{ij} $.
	Then $ U\coloneqq \Spn\langle\{v_j\},\{a_{ij}\}\rangle $ satisfies $ \Delta(U)\subset U\otimes U $. Also, $ L\coloneqq \Spn\langle U, S(U)\rangle $ satisfies $ \Delta(L)\subset L\otimes L $, $ S(L)\subseteq L $. Hence $ A_\alpha = k[L] $ will work.
\end{proof}
To make full use of this, we first need a 
\begin{definition}\label{def:finite_type}
	An affine group scheme is \emph{of finite type} if its Hopf algebra is finitely generated. \footnote{Waterhouse calls this \emph{algebraic}, but \emph{finite type} is more in line with standard scheme-theoretic terminology.}
\end{definition}
Note that being \emph{of finite type} is a weaker condition than being \emph{finite}.
Then we have:
\begin{corollary}\label{cor:finite_type_is_inverse_limit}
	Every affine group scheme $ G $ over a field is an inverse limit of affine group schemes $ G_\alpha $ of finite type.
\end{corollary}

\begin{proof}
	This is immediate, simply let $ G_\alpha $ be the group schemes corresponding to the Hopf algebras $ A_\alpha $. (Or just $ \Spec A_\alpha $.)
\end{proof}

We conclude with today's final theorem:
\begin{theorem}\label{thm:everything_in_GL}
	Every affine group scheme $ G $ of finite type over a field is isomorphic to a closed subgroup of some $ \mathbf{GL}_n $.
\end{theorem}
\begin{proof}
 Let $ A $ be the Hopf algebra (the coordinate ring) of $ G $. By \cref{prop:findim_cosubmodules}, there is a finite-dimensional subcomodule $ V \subseteq A  $ containing the algebra generators. Let $ \{v_j\} $ be a basis for $ V $, such that $ \Delta v_j=\sum v_i\otimes a_{ij} $.
 
 Note that $ \Delta|V\colon V\to V\otimes A $, so $ A $ acts on $ V $. The corresponding map of Hopf algebras is 
 \[ k[\{x_{ij}\}_{i,j\le n}, {1}/{\det}]\to A, \]
 defined by $ x_{ij}\mapsto a_{ij} $.
 But $ v_j =(\epsilon\otimes\id)\Delta(v_j)=\sum\epsilon(v_i)a_{ij} $, so the image contains $ V $, thus all the algebra generators, so the image is all of $ A $. Then we have a surjective map from the Hopf algebra of $ \mathbf{GL}_{\dim V} $ onto $ A $, which means that $ G\injto \mathbf{GL}_{\dim V} $ and is closed.
\end{proof}
\end{document}
